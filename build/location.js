!function(){function t(t){return null!=t&&"object"==typeof t}function n(t){return"undefined"==typeof t}function r(t){return n(t)===!1}function e(t){return"string"==typeof t}function i(t){return Array.prototype.slice.call(t)}function s(n,r,e){n.prototype=Object.create(r.prototype),t(e)&&o(n.prototype,e)}function o(n){n||(n={});var e,s,o,l,u,h,a,c=i(arguments).slice(1).filter(r),f=c.length;for(h=0;f>h;h++)if((e=c[h])&&t(e))for(o=Object.keys(e),u=o.length,a=0;u>a;a++)l=o[a],s=e[l],n[l]=s;return n}function t(t){return null!==t&&"object"==typeof t}function l(t){a.call(this),this.url_=null,this.global=t,0===this.global.location.hash.length&&this.url("/"),this.sync();var n=this;this.onHashChange_=function(){n.url()!==n.oldUrl&&(n.sync(),n.replace===n.url()?n.replace=null:(n.replace&&(n.replace=null),n.emit("urlChange",n.url(),n.oldUrl)))},t.addEventListener("hashchange",this.onHashChange_)}function u(t){a.call(this),this.url_=null,this.browser=t,this.sync();var n=this;this.onUrlChangeListener=function(t,r){n.sync(),n.emit("locationChangeStart",n.url(),n.oldUrl)?n.emit("locationChangeSuccess",n.url(),n.oldUrl):n.url(r,1)},this.browser.on("urlChange",this.onUrlChangeListener)}!function(t){function n(){this._events={}}function r(t){return"undefined"==typeof t}n.prototype={on:function(t,n){return this._events.hasOwnProperty(t)||(this._events[t]=[]),this._events[t].push(n),this},off:function(t,n){var r,e=this._events[t];for(r=0;r<e.length;r++)e[r]==n&&e.splice(r,1);return this},emit:function(t){var n,i,s,o=e(arguments).slice(1);if(this._events.hasOwnProperty(t)){for(s=this._events[t],i=new Array(s.length),n=0;n<s.length;n++)i[n]=s[n].apply(this,o);return i.every(function(t){return r(t)?!0:t})}return!0},removeAllListeners:function(){var t,n,r=Object.keys(this._events),e=r.length;for(t=0;e>t;t++)n=r[t],this._events[n]=[]}};var e=function(t){return Array.prototype.slice.call(t)};Array.isArray,t.eventemitter={EventEmitter:n}}(window);var h=Array.isArray||function(n){return t(n)&&n instanceof Array==!0},a=window.eventemitter.EventEmitter;s(l,a,{url:function(t,n){if(!t)return this.url_;var r=this.global;return n&&(this.replace=t),r.location.hash=t,this},sync:function(){var t=this.global.location.hash.substring(1);return t!==this.url_&&(this.oldUrl=this.url_,this.url_=t),this},destroy:function(){this.removeAllListeners(),this.global.removeEventListener("hashchange",this.onHashChange_)}}),s(u,a,{url:function(t,n){return t?(this.browser.url(t,n),this):this.url_},search:function(n){var r=this.url().split("?");return t(n)?(r[1]=p.stringify(n),this.url(r.join("?")),this):p.parse(r[1])},path:function(t,n){var r=this.url().split("?");return t?(r[0]=t,this.url(r.join("?"),n),this):r[0]},sync:function(){var t=this.browser.url();return t!==this.url_&&(this.oldUrl=this.url_,this.url_=t),this},destroy:function(){this.browser.off("urlChange",this.onUrlChangeListener)}});var c=function(t){return decodeURIComponent(t)},f=function(t){return encodeURIComponent(t)},p={stringify:function(t){var n,r,e,i=Object.keys(t),s=new Array(i.length);for(n=i.length-1;n>=0;n--)r=i[n],e=t[r],h(e)&&(e=e.join(",")),s[n]=f(r)+"="+f(e);return s.join("&")},parse:function(t){if(e(t)){var n,r,i,s={},o=t.split("&").filter(function(t){return t.length>0}).map(function(t){return t.split("=").filter(function(t){return t.length>0})});for(n=o.length-1;n>=0;n--)i=o[n],r=c(i[0]),s[r]=c(i[1]);return s}return{}}};window.$location={Location:u,Browser:l}}();