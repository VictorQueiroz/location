!function(n){function r(n){this.$window=n,this.urlChangeInit=!1,this.urlChangeListeners=[]}function t(n){return null!=n&&"object"==typeof n}function e(n){return"undefined"==typeof n}function i(n){return"number"==typeof n}function o(n){return"boolean"==typeof n}function u(n){return"string"==typeof n}function s(n){this.browser=n}r.prototype={onUrlChange:function(n){var r=this.urlChangeListeners;if(!this.urlChangeInit){var t=this;this.$window.addEventListener("hashchange",function(n){t.fireUrlChange()}),this.urlChangeInit=!0}r.push(n)},fireUrlChange:function(){for(var n=this.urlChangeListeners,r=n.length-1;r>=0;r--)n[r](this.url())},url:function(n){var r=this.$window;if(!n){var t=r.location.hash;if("#"==t.charAt(0))return t.substring(1);if(0==t.length)return t;throw new Error("Invalid hash")}"/"!=n.charAt(0)&&(n="/"+n),r.location.hash=n}},s.SEP="?",s.prototype={path:function(n){var r=this.url().split(s.SEP);return n?(r[0]=n,this.url(r.join(s.SEP)),this):r[0]},search:function(n,r){var i=this.url().split(s.SEP);return e(n)?(i[1]=i[1]||"",l.parse(i[1])):(t(n)&&(i[1]=l.stringify(n),this.url(i.join(s.SEP))),this)},url:function(n){return n?void this.browser.url(n):this.browser.url()}};for(var h=new Array(256),a=0;256>a;++a)h[a]="%"+((16>a?"0":"")+a.toString(16)).toUpperCase();var f=function(n){return u(n)?n:i(n)&&isFinite(n)?""+n:o(n)?n?"true":"false":""},l={SEP:"&",EQ:"=",escape:function(n){n=""+n;var r,t,e=n.length,i="";if(0===e)return n;for(r=0;e>r;++r)t=n.charCodeAt(r),33===t||45===t||46===t||95===t||126===t||t>=39&&42>=t||t>=48&&57>=t||t>=65&&90>=t||t>=97&&122>=t?i+=n[r]:128>t?i+=h[t]:2048>t?i+=h[192|t>>6]+h[128|63&t]:55296>t||t>=57344?i+=h[224|t>>12]+h[128|t>>6&63]+h[128|63&t]:(++r,t=65536+((1023&t)<<10|1023&n.charCodeAt(r)),i+=h[240|t>>18]+h[128|t>>12&63]+h[128|t>>6&63]+h[128|63&t]);return i},parse:function(n,r,t){if(r=r||l.SEP,t=t||l.EQ,u(n)){var e,i,o,s=n.split(r).filter(function(n){return n.length>0}).map(function(n){return n.split(t)}),h={};for(e=s.length-1;e>=0;e--)i=s[e][0],o=s[e][1],h[i]=o;return h}},stringify:function(n,r,t,e){r=r||l.SEP,t=t||l.EQ;var i=l.escape;if(e&&"function"==typeof e.encodeURIComponent&&(i=e.encodeURIComponent),null!==n&&"object"==typeof n){for(var o=Object.keys(n),u=o.length,s=u-1,h="",a=0;u>a;++a){var c=o[a],p=n[c],g=i(f(c))+t;if(Array.isArray(p)){for(var v=p.length,w=v-1,y=0;v>y;++y)h+=g+i(f(p[y])),w>y&&(h+=r);v&&s>a&&(h+=r)}else h+=g+i(f(p)),s>a&&(h+=r)}return h}return""}};n.$location={Location:s,Browser:r}}($window);